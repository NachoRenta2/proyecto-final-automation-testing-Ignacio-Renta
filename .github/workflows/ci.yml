name: CI TalentoT
on:
  push:
    branches: [main,develop]
  pull_request:
    branches: [main,develop]
  
jobs: 
  test:
    runs-on: ubuntu-latest
    env:
      PYTHON_VERSION: '3.12'
      PIP_CACHE: ~/.cache/pip

    steps:
      #1 checkout
    - name: Checkout codigo
      uses: actions/checkout@v4


     #2 cache de pip
    - name: cache dependencia
      uses: actions/cache@v4
      with: 
       path: ${{ env.PIP_CACHE }}
       key: ${{ runner.os}}-pip-${{ hashfiles('**requirementes.txt') }}

      #3 setup python
    - name: instalar python ${{ env.PYTHON_VERSION }}
      uses: actions/setup-python@v5
      with: 
       python-version: ${{ env.PYTHON_VERSION }} 

     #4 instalar dependencias
    - name: instalar dependencias
      run: pip install -r requirements.txt
  
    #5 ejecutar test
    - name: Run test
      run: python3 run_tests_alt.py
  
    #6 subirartefactos (reportes imagenes logs)

    - name: subir html report
      uses: actions/upload-artifact@v4
      with: 
        name: html-report
        path: reports/

    - name: subir suite logs
      uses: actions/upload-artifact@v4
      with:
        name: suite-log
        path: logs/







